<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="/briefly/assets/javascripts/respond.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Briefly</title>
  </head>
  <body>
    <div class="wrapper">
      <section>
        <div id="title">
          <h1>Welcome to <span class="briefly">Briefly</span>, a topic identifying service.</h1>
          <h3>Give me a webpage and I'll tell you what it's about:</h2>
          <input id="input" type="text" onfocus="this.value=''" value="webpage URL">
          <button onclick="go()">Go</button>
          <script>
          function go() {
            var inputURL = document.getElementById('input').value.trim();
            inputURL = inputURL.replace(/^https?\:\/\//i, "");
            inputURL = inputURL.replaceAll("/", "^");
            inputURL = encodeURIComponent(inputURL);
            location.href = inputURL;
          }
          </script>
        </div>
      </section>
      {% if url %}
        <section>
          <div id="results">
            <p>You asked for the URL {{ url }}.</p>
            {% if response %}
              <p>This is the text I got from there: {{ response[0:100] }}</p>
            {% else %}
              <p>That website seems to be inaccessible. Sorry.</p>
            {% endif %}
          </div>
        </section>
      {% endif %}
    </div>
    <div class="footer" role="contentinfo">
    <p>Briefly is in early alpha. Expect naught but blood, sweat and tears.</p>
    </div>
  </body>
</html>
